{% extends 'base.html' %}

{% block content %}

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-4">{{ client.first_name }} {{ client.last_name }}</h1>
            <p class="lead">Report Preview for {{ client.email_address }}</p>
        </div>
    </div>

    <div class="container">
        <form action="{% url 'preview-email' client.id %}" method="post">
            {% csrf_token %}
            <div class="form-group row">
                <div class="col-sm-1"></div>
                <label for="recipient_email" class="col-sm-2 col-form-label">Recipient Email</label>
                <div class="col-sm-8">
{#                  <input type="email" class="form-control" id="recipient_email" value="{{ client.email_address }}" required>#}
                    {{ form.recipient_email }}
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-1"></div>
                <label for="subject" class="col-sm-2 col-form-label">Subject</label>
                <div class="col-sm-8">
                    {{ form.subject }}
{#                    <input type="text" class="form-control" id="subject" value="Report for {{ client.first_name }} {{ client.last_name }}" required>#}
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-1"></div>
                <label class="col-sm-2 col-form-label">Order Report</label>
                <div class="col-sm-8">
                    <div class="form-control" readonly>
                        {% for order in orders %}
                        <p class="text-monospace">PO Number: {{ order.po_number }}</p>
                        <ul>
                            {% for orderline in order.order_items.all %}
                                <p class="text-monospace"><li>{{ orderline.quantity }} x {{ orderline.item }}</li></p>
                            {% endfor %}
                        </ul>
                    {% endfor %}
                    </div>
                </div>
            </div>

{#            <div class="form-group row">#}
{#                <div class="col-sm-1"></div>#}
{#                <label for="comments" class="col-sm-2 col-form-label">Additional Comments</label>#}
{#                <div class="col-sm-8">#}
{#                <textarea class="form-control" id="comments" rows="3"></textarea>#}
{#                </div>#}
{#            </div>#}

            <div class="form-group row">
                <div class="col-sm-3"></div>
                <div class="col-sm-8">
                    <input type="submit" class="btn btn-primary"></input>
                    <a class="btn btn-secondary" href="{% url 'client-detail' client.id%}">Back to client</a>
                </div>
            </div>
        </form>

    </div>



{% endblock %}